@page "/biza/editauthor/{AuthorID}"

<h3>著者データの更新</h3>

<EditForm Model="@vm" OnValidSubmit="@btnSubmit_OnClick">
    <DataAnnotationsValidator></DataAnnotationsValidator>

    <dl>
        <dt>著者ID</dt><dd>@AuthorID</dd>
        <dt>著者名（名）</dt><dd><InputText @bind-Value="vm.AuthorFirstName"></InputText></dd>
        <dt>著者名（姓）</dt><dd><InputText @bind-Value="vm.AuthorLastName"></InputText></dd>
        <dt>電話番号</dt><dd><InputText @bind-Value="vm.Phone"></InputText></dd>
    </dl>

    <ValidationSummary></ValidationSummary>

    <button type="submit">更新</button>
    <button type="button" @onclick="@btnCancel_OnClick">キャンセル</button>

</EditForm>

@code {
    [Parameter]
    public string AuthorID { get; set; } = null;

    private EditAuthorViewModel vm { get; set; } = null;

    private NavigationManager nav { get; set; } = null;

    protected override Task OnInitializedAsync()
    {
        vm = new EditAuthorViewModel()
        {
            AuthorId = AuthorID,
            AuthorFirstName = "Nobuyuki",
            AuthorLastName = "Akama",
            Phone = "123 456-7890"
        };
        return base.OnInitializedAsync();
    }

    private void btnSubmit_OnClick()
    {
        nav.NavigateTo("/");
    }

    private void btnCancel_OnClick()
    {
        nav.NavigateTo("/");
    }

}
